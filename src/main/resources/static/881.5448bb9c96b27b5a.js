"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[881],{1881:(ue,w,r)=>{r.r(w),r.d(w,{TeachersViewModule:()=>me});var u=r(6814),N=r(1896),_=r(3365),m=r(5313),b=r(8337),l=r(6223),d=r(7700),e=r(5879),y=r(9862);const h="http://localhost:8080/api/v1/teacher";let g=(()=>{var t;class n{constructor(i){this.http=i}getTeachers(){return this.http.get(h)}createTeacher(i){return this.http.post(h,i)}updateTeacher(i){return this.http.put(h,i)}deleteTeacher(i){return this.http.delete(h,{body:i})}getUniversities(){return this.http.get("http://localhost:8080/api/v1/university")}getCourses(){return this.http.get("http://localhost:8080/api/v1/course")}}return(t=n).\u0275fac=function(i){return new(i||t)(e.LFG(y.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),n})();var f=r(2296),T=r(9157),U=r(2032),v=r(8525),Q=r(3680);function Y(t,n){1&t&&(e.ynx(0),e._uU(1," Editeaza cadru didactic "),e.BQk())}function q(t,n){1&t&&e._uU(0," Adauga cadru didactic ")}function I(t,n){if(1&t&&(e.TgZ(0,"span",17),e._uU(1),e.qZA()),2&t){const a=e.oxw(2);e.xp6(1),e.hij(" (+",((null==a.teacherForm.get("universities").value?null:a.teacherForm.get("universities").value.length)||0)-1,") ")}}function R(t,n){if(1&t&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a),e.xp6(1),e.Oqu(null==a?null:a.name)}}function k(t,n){if(1&t&&(e.TgZ(0,"span",17),e._uU(1),e.qZA()),2&t){const a=e.oxw(2);e.xp6(1),e.hij(" (+",((null==a.teacherForm.get("courses").value?null:a.teacherForm.get("courses").value.length)||0)-1,") ")}}function E(t,n){if(1&t&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.Q6J("value",a),e.xp6(1),e.Oqu(null==a?null:a.name)}}function M(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"form",6)(1,"mat-form-field")(2,"mat-label"),e._uU(3,"Email"),e.qZA(),e._UZ(4,"input",7),e.qZA(),e.TgZ(5,"mat-form-field")(6,"mat-label"),e._uU(7,"Nume"),e.qZA(),e._UZ(8,"input",8),e.qZA(),e.TgZ(9,"mat-form-field")(10,"mat-label"),e._uU(11,"Prenume"),e.qZA(),e._UZ(12,"input",9),e.qZA(),e.TgZ(13,"mat-form-field")(14,"mat-label"),e._uU(15,"Facultati"),e.qZA(),e.TgZ(16,"mat-select",10)(17,"mat-select-trigger"),e._uU(18),e.YNc(19,I,2,1,"span",11),e.qZA(),e.YNc(20,R,2,2,"mat-option",12),e.ALo(21,"async"),e.qZA()(),e.TgZ(22,"mat-form-field")(23,"mat-label"),e._uU(24,"Cursuri"),e.qZA(),e.TgZ(25,"mat-select",13)(26,"mat-select-trigger"),e._uU(27),e.YNc(28,k,2,1,"span",11),e.qZA(),e.YNc(29,E,2,2,"mat-option",12),e.ALo(30,"async"),e.qZA()(),e.TgZ(31,"div",14)(32,"button",15),e.NdJ("click",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.close())}),e._uU(33,"ANULEAZA"),e.qZA(),e.TgZ(34,"button",16),e.NdJ("click",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.save())}),e._uU(35,"SALVEAZA"),e.qZA()()()}if(2&t){const a=e.oxw();e.Q6J("formGroup",a.teacherForm),e.xp6(4),e.Q6J("disabled",null==a.data?null:a.data.id),e.xp6(12),e.Q6J("compareWith",a.compareWithFn),e.xp6(2),e.hij(" ",(null==a.teacherForm.get("universities").value||null==a.teacherForm.get("universities").value[0]?null:a.teacherForm.get("universities").value[0].name)||""," "),e.xp6(1),e.Q6J("ngIf",((null==a.teacherForm.get("universities").value?null:a.teacherForm.get("universities").value.length)||0)>1),e.xp6(1),e.Q6J("ngForOf",e.lcZ(21,11,a.universities)),e.xp6(5),e.Q6J("compareWith",a.compareWithFn),e.xp6(2),e.hij(" ",(null==a.teacherForm.get("courses").value||null==a.teacherForm.get("courses").value[0]?null:a.teacherForm.get("courses").value[0].name)||""," "),e.xp6(1),e.Q6J("ngIf",((null==a.teacherForm.get("courses").value?null:a.teacherForm.get("courses").value.length)||0)>1),e.xp6(1),e.Q6J("ngForOf",e.lcZ(30,13,a.courses)),e.xp6(5),e.Q6J("disabled",a.teacherForm.invalid)}}let V=(()=>{var t;class n{constructor(i,o,c,s){this.formBuilder=i,this.dialogRef=o,this.data=c,this.teacherService=s}ngOnInit(){this.teacherForm=this.formBuilder.group({firstName:[this.data?.firstName?this.data?.firstName:""],lastName:[this.data?.lastName?this.data?.lastName:"",[l.kI.required]],email:[{value:this.data?.email?this.data?.email:"",disabled:this.data?.id},[l.kI.required,l.kI.email]],universities:[this.data?.universities?this.data?.universities:"",[l.kI.required]],courses:[this.data?.courses?this.data?.courses:"",[l.kI.required]]}),this.universities=this.teacherService.getUniversities(),this.courses=this.teacherService.getCourses()}compareWithFn(i,o){return i.id===o.id}close(){this.dialogRef.close({event:"cancel"})}save(){this.dialogRef.close({event:"save",data:this.data?.id?{id:this.data?.id,...this.teacherForm.getRawValue()}:this.teacherForm.getRawValue()})}}return(t=n).\u0275fac=function(i){return new(i||t)(e.Y36(l.qu),e.Y36(d.so),e.Y36(d.WI),e.Y36(g))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-teacher-add"]],decls:7,vars:3,consts:[[1,"dialog"],[1,"dialog__title"],[4,"ngIf","ngIfElse"],["noData",""],[1,"dialog__content"],[3,"formGroup",4,"ngIf"],[3,"formGroup"],["matInput","","formControlName","email",3,"disabled"],["matInput","","formControlName","lastName"],["matInput","","formControlName","firstName"],["formControlName","universities","multiple","",3,"compareWith"],["class","example-additional-selection",4,"ngIf"],[3,"value",4,"ngFor","ngForOf"],["formControlName","courses","multiple","",3,"compareWith"],[1,"dialog__content__buttons"],["type","button","mat-button","",3,"click"],["mat-button","",3,"disabled","click"],[1,"example-additional-selection"],[3,"value"]],template:function(i,o){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,Y,2,0,"ng-container",2),e.YNc(3,q,1,0,"ng-template",null,3,e.W1O),e.qZA(),e.TgZ(5,"div",4),e.YNc(6,M,36,15,"form",5),e.qZA()()),2&i){const c=e.MAs(4);e.xp6(2),e.Q6J("ngIf",null==o.data?null:o.data.id)("ngIfElse",c),e.xp6(4),e.Q6J("ngIf",o.teacherForm)}},dependencies:[u.sg,u.O5,f.lW,l._Y,l.Fj,l.JJ,l.JL,l.sg,l.u,T.KE,T.hX,U.Nt,v.gD,v.$L,Q.ey,u.Ov]}),n})();var P=r(2447),Z=r(9397),C=r(6306),x=r(8504),F=r(617),D=r(5986),p=r(6311);function O(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"th",20)(1,"mat-checkbox",21),e.NdJ("change",function(o){e.CHM(a);const c=e.oxw();return e.KtG(o?c.toggleAllRows():null)}),e.qZA()()}if(2&t){const a=e.oxw();e.xp6(1),e.Q6J("checked",a.selection.hasValue()&&a.isAllSelected())("indeterminate",a.selection.hasValue()&&!a.isAllSelected())}}function B(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"td",22)(1,"mat-checkbox",23),e.NdJ("click",function(o){return o.stopPropagation()})("change",function(o){const s=e.CHM(a).$implicit,A=e.oxw();return e.KtG(o?A.selection.toggle(s):null)}),e.qZA()()}if(2&t){const a=n.$implicit,i=e.oxw();e.xp6(1),e.Q6J("checked",i.selection.isSelected(a))}}function G(t,n){1&t&&(e.TgZ(0,"th",20),e._uU(1," Nume "),e.qZA())}function L(t,n){if(1&t&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.hij(" ",a.lastName," ")}}function $(t,n){1&t&&(e.TgZ(0,"th",20),e._uU(1," Prenume "),e.qZA())}function j(t,n){if(1&t&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.hij(" ",a.firstName," ")}}function H(t,n){1&t&&(e.TgZ(0,"th",20),e._uU(1," Email "),e.qZA())}function W(t,n){if(1&t&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&t){const a=n.$implicit;e.xp6(1),e.hij(" ",a.email," ")}}function z(t,n){1&t&&(e.TgZ(0,"th",20),e._uU(1," Facultati "),e.qZA())}function K(t,n){if(1&t&&(e.TgZ(0,"td",22),e._uU(1),e.qZA()),2&t){const a=n.$implicit,i=e.oxw();e.xp6(1),e.hij(" ",i.getUniversities(a.universities)," ")}}function X(t,n){1&t&&(e.TgZ(0,"th",20),e._uU(1," Cursuri "),e.qZA())}function ee(t,n){if(1&t&&(e.ynx(0),e.TgZ(1,"div",26),e._UZ(2,"div",27),e._uU(3),e._UZ(4,"span"),e.qZA(),e.BQk()),2&t){const a=n.$implicit;e.xp6(2),e.Udp("background",a.scheduleColor),e.xp6(1),e.hij(" ",a.name," ")}}function te(t,n){if(1&t&&(e.TgZ(0,"td",22)(1,"div",24),e.YNc(2,ee,5,3,"ng-container",25),e.qZA()()),2&t){const a=n.$implicit;e.xp6(2),e.Q6J("ngForOf",a.courses)}}function ae(t,n){1&t&&(e.TgZ(0,"th",28),e._uU(1,"\xa0"),e.qZA())}function ie(t,n){if(1&t){const a=e.EpF();e.TgZ(0,"td",22)(1,"mat-icon",29,30),e._uU(3,"more_vert"),e.qZA(),e.TgZ(4,"mat-menu",null,31)(6,"button",32),e.NdJ("click",function(){const c=e.CHM(a).$implicit,s=e.oxw();return e.KtG(s.openEditDialog(c))}),e.TgZ(7,"mat-icon"),e._uU(8,"edit"),e.qZA(),e._uU(9," EDITEAZA "),e.qZA(),e.TgZ(10,"button",32),e.NdJ("click",function(){const c=e.CHM(a).$implicit,s=e.oxw();return e.KtG(s.openDeleteDialog(c))}),e.TgZ(11,"mat-icon"),e._uU(12,"delete"),e.qZA(),e._uU(13," STERGE "),e.qZA()()()}if(2&t){const a=e.MAs(5);e.xp6(1),e.Q6J("matMenuTriggerFor",a)}}function ne(t,n){1&t&&e._UZ(0,"tr",33)}function oe(t,n){1&t&&e._UZ(0,"tr",34)}const ce=function(){return[20]},re=[{path:"",component:(()=>{var t;class n{isAllSelected(){const i=this.selection?.selected?.length,o=this.dataSource?.data?.length;return i===o}toggleAllRows(){this.isAllSelected()?this.selection.clear():this.selection.select(...this.dataSource.data)}constructor(i,o){this.teachersViewService=i,this.dialog=o,this.displayedColumns=["select","email","firstName","lastName","universityName","courses","actions"],this.selection=new b.Ov(!0,[]),this.decimalPipe=new u.JJ(navigator.language)}ngOnInit(){this.refreshData()}ngAfterViewInit(){this.paginator._intl.itemsPerPageLabel="Iteme pe pagina",this.paginator._intl.firstPageLabel="Prima pagina",this.paginator._intl.lastPageLabel="Ultima pagina",this.paginator._intl.nextPageLabel="Urmatoarea pagina",this.paginator._intl.previousPageLabel="Pagina anterioara",this.paginator._intl.getRangeLabel=(i,o,c)=>`${i*o+1} - ${(i+1)*o} din ${this.decimalPipe.transform(c)}`}getUniversities(i){return i.map(o=>o.name).join(", ")}openAddDialog(){this.dialog.open(V,{data:{}}).afterClosed().subscribe(o=>{"save"==o?.event&&this.teachersViewService.createTeacher(o.data).pipe((0,Z.b)(()=>this.refreshData()),(0,C.K)(c=>(0,x._)(()=>c))).subscribe()})}openEditDialog(i){this.dialog.open(V,{data:i}).afterClosed().subscribe(c=>{"save"==c?.event&&this.teachersViewService.updateTeacher(c.data).pipe((0,Z.b)(()=>this.refreshData()),(0,C.K)(s=>(0,x._)(()=>s))).subscribe()})}openDeleteDialog(i){this.dialog.open(P.o,{data:{title:"Stergere Cadre Didactice",content:["Urmeaza sa stergeti urmatoarele cadre didactice: "+(()=>i?.id?i?.firstName+" "+i?.lastName:this.selection.selected.map(c=>c.firstName+" "+c.lastName).join(", "))()+".","Doriti sa continuati?"]}}).afterClosed().subscribe(c=>{"save"==c?.event&&this.teachersViewService.deleteTeacher(i?.id?[i?.id]:this.selection.selected.map(s=>s.id)).pipe((0,Z.b)(()=>this.refreshData()),(0,C.K)(s=>(0,x._)(()=>s))).subscribe()})}refreshData(){this.teachersViewService.getTeachers().subscribe(i=>{this.dataSource=new m.by(i),this.dataSource.paginator=this.paginator,this.selection=new b.Ov(!0,[])})}isDeleteDisabled(){return 0===this.selection.selected.length}}return(t=n).\u0275fac=function(i){return new(i||t)(e.Y36(g),e.Y36(d.uw))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-teachers-view"]],viewQuery:function(i,o){if(1&i&&e.Gf(_.NW,5),2&i){let c;e.iGM(c=e.CRH())&&(o.paginator=c.first)}},decls:38,vars:7,consts:[[1,"page"],[1,"page__top"],[1,"page__top__actions"],["mat-button","",1,"page__top__actions__button",3,"click"],["mat-button","",1,"page__top__actions__button",3,"disabled","click"],[1,"page__table"],["mat-table","",3,"dataSource"],["matColumnDef","select"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","firstName"],["matColumnDef","lastName"],["matColumnDef","email"],["matColumnDef","universityName"],["matColumnDef","courses"],["matColumnDef","actions"],["mat-header-cell","","aria-label","row actions",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","",1,"page__table__paginator",3,"hidePageSize","pageSizeOptions"],["mat-header-cell",""],[3,"checked","indeterminate","change"],["mat-cell",""],[3,"checked","click","change"],[1,"table__courses"],[4,"ngFor","ngForOf"],[1,"table__courses__course"],[1,"table__courses__course__color"],["mat-header-cell","","aria-label","row actions"],[1,"page__table__row-icon",3,"matMenuTriggerFor"],["menuTrigger",""],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e._uU(2," Cadre didactice "),e.TgZ(3,"div",2)(4,"button",3),e.NdJ("click",function(){return o.openAddDialog()}),e.TgZ(5,"mat-icon"),e._uU(6,"add"),e.qZA(),e._uU(7," ADAUGA "),e.qZA(),e.TgZ(8,"button",4),e.NdJ("click",function(){return o.openDeleteDialog()}),e.TgZ(9,"mat-icon"),e._uU(10,"delete"),e.qZA(),e._uU(11," STERGE "),e.qZA()()(),e.TgZ(12,"div",5)(13,"table",6),e.ynx(14,7),e.YNc(15,O,2,2,"th",8),e.YNc(16,B,2,1,"td",9),e.BQk(),e.ynx(17,10),e.YNc(18,G,2,0,"th",8),e.YNc(19,L,2,1,"td",9),e.BQk(),e.ynx(20,11),e.YNc(21,$,2,0,"th",8),e.YNc(22,j,2,1,"td",9),e.BQk(),e.ynx(23,12),e.YNc(24,H,2,0,"th",8),e.YNc(25,W,2,1,"td",9),e.BQk(),e.ynx(26,13),e.YNc(27,z,2,0,"th",8),e.YNc(28,K,2,1,"td",9),e.BQk(),e.ynx(29,14),e.YNc(30,X,2,0,"th",8),e.YNc(31,te,3,1,"td",9),e.BQk(),e.ynx(32,15),e.YNc(33,ae,2,0,"th",16),e.YNc(34,ie,14,1,"td",9),e.BQk(),e.YNc(35,ne,1,0,"tr",17),e.YNc(36,oe,1,0,"tr",18),e.qZA(),e._UZ(37,"mat-paginator",19),e.qZA()()),2&i&&(e.xp6(8),e.Q6J("disabled",o.isDeleteDisabled()),e.xp6(5),e.Q6J("dataSource",o.dataSource),e.xp6(22),e.Q6J("matHeaderRowDef",o.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("hidePageSize",!0)("pageSizeOptions",e.DdM(6,ce)))},dependencies:[u.sg,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,F.Hw,f.lW,_.NW,D.oG,p.VK,p.OP,p.p6],styles:['.table__courses[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.table__courses__course[_ngcontent-%COMP%]{display:flex;align-items:center;width:-moz-fit-content;width:fit-content;margin-right:10px}.table__courses__course__color[_ngcontent-%COMP%]{width:10px;height:10px;border-radius:50%;margin-right:6px}.table__courses__course[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(:last-child){content:", "}']}),n})()}];let se=(()=>{var t;class n{}return(t=n).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[N.Bz.forChild(re),N.Bz]}),n})();var le=r(9876);let me=(()=>{var t;class n{}return(t=n).\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[g],imports:[u.ez,se,m.p0,F.Ps,f.ot,_.TU,D.p9,d.Is,l.u5,l.UX,T.lN,U.c,le.L,p.Tx,v.LD]}),n})()}}]);